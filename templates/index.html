{% extends "base.html" %}

{% block content %}
<!-- Modern Gen Z Discover Interface -->
<div class="discover-container">
    <!-- Hero Section with Liquid Glass -->
    <div class="hero-section-liquid">
        <!-- Liquid Background -->
        <div class="liquid-background">
            <div class="liquid-shape liquid-shape-1"></div>
            <div class="liquid-shape liquid-shape-2"></div>
            <div class="liquid-shape liquid-shape-3"></div>
            <div class="liquid-shape liquid-shape-4"></div>
            <div class="liquid-shape liquid-shape-5"></div>
            
            <!-- Geometric Shapes -->
            <div class="geometric-shape geometric-shape-1"></div>
            <div class="geometric-shape geometric-shape-2"></div>
            <div class="geometric-shape geometric-shape-3"></div>
            <div class="geometric-shape geometric-shape-4"></div>
            <div class="geometric-shape geometric-shape-5"></div>
        </div>
        <div class="container">
            <div class="hero-content">
                <div class="hero-badge">
                    <span class="badge-text">🔥 Trending Now</span>
                </div>
                <h1 class="hero-title">
                    Discover <span class="gradient-text">Amazing People</span>
                </h1>
                <p class="hero-subtitle">
                    Connect with creators, mentors & experts who get you
                </p>
                
                <!-- Smart Search Bar -->
                <div class="smart-search-container">
                    <div class="search-bar-liquid">
                        <div class="search-icon">
                            <i data-feather="search"></i>
                        </div>
                        <input type="text" 
                               class="search-input" 
                               placeholder="What are you looking for?" 
                               name="query" 
                               value="{{ request.args.get('query', '') }}"
                               id="smartSearch">
                        <div class="search-suggestions" id="searchSuggestions"></div>
                    </div>
                </div>

                <!-- Quick Stats -->
                <div class="quick-stats">
                    <div class="stat-item">
                        <span class="stat-number">{{ users|length }}+</span>
                        <span class="stat-label">Creators</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">24/7</span>
                        <span class="stat-label">Available</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">4.9★</span>
                        <span class="stat-label">Rating</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Category Tabs with Liquid Glass -->
    <div class="category-tabs-section">
        <div class="container">
            <div class="category-tabs-liquid">
                <div class="tab-item active" data-category="all">
                    <div class="tab-icon">🌟</div>
                    <span>All</span>
                </div>
                <div class="tab-item" data-category="tech">
                    <div class="tab-icon">💻</div>
                    <span>Tech</span>
                </div>
                <div class="tab-item" data-category="creative">
                    <div class="tab-icon">🎨</div>
                    <span>Creative</span>
                </div>
                <div class="tab-item" data-category="business">
                    <div class="tab-icon">💼</div>
                    <span>Business</span>
                </div>
                <div class="tab-item" data-category="fitness">
                    <div class="tab-icon">💪</div>
                    <span>Fitness</span>
                </div>
                <div class="tab-item" data-category="lifestyle">
                    <div class="tab-icon">✨</div>
                    <span>Lifestyle</span>
                </div>
                <div class="tab-item" data-category="education">
                    <div class="tab-icon">📚</div>
                    <span>Education</span>
                </div>
                <div class="tab-item" data-category="finance">
                    <div class="tab-icon">💰</div>
                    <span>Finance</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Profiles Grid with Infinite Scroll -->
    <div class="profiles-section">
        <div class="container">
            <!-- Filter Bar -->
            <div class="filter-bar">
                <div class="filter-group">
                    <button class="filter-btn active" data-sort="trending">
                        <i data-feather="trending-up"></i>
                        Trending
                    </button>
                    <button class="filter-btn" data-sort="recent">
                        <i data-feather="clock"></i>
                        Recent
                    </button>
                    <button class="filter-btn" data-sort="rating">
                        <i data-feather="star"></i>
                        Top Rated
                    </button>
                </div>
                <div class="view-toggle">
                    <button class="view-btn active" data-view="grid">
                        <i data-feather="grid"></i>
                    </button>
                    <button class="view-btn" data-view="list">
                        <i data-feather="list"></i>
                    </button>
                </div>
            </div>

            <!-- Profiles Grid -->
            <div class="profiles-grid" id="profilesGrid">
                {% for user in users %}
                <div class="profile-card-liquid" 
                     data-categories="{{ user.get_specialty_tags()|join(',')|lower }}"
                     data-search="{{ (user.full_name or user.username)|lower }} {{ (user.bio or '')|lower }} {{ user.get_specialty_tags()|join(' ')|lower }}"
                     data-name="{{ (user.full_name or user.username)|lower }}"
                     data-bio="{{ (user.bio or '')|lower }}"
                     data-tags="{{ user.get_specialty_tags()|join(' ')|lower }}">
                    <!-- Card Background with Liquid Effect -->
                    <div class="card-liquid-bg"></div>
                    
                    <!-- Profile Image with Hover Effect -->
                    <div class="profile-image-container">
                        <img src="{{ user.profile_picture or url_for('static', filename='img/default-avatar.png') }}" 
                             alt="{{ user.full_name }}" 
                             class="profile-image">
                        <div class="profile-overlay">
                            <div class="overlay-content">
                                <button class="quick-action-btn like-btn" data-user-id="{{ user.id }}">
                                    <i data-feather="heart"></i>
                                </button>
                                <button class="quick-action-btn message-btn" data-user-id="{{ user.id }}">
                                    <i data-feather="message-circle"></i>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Status Badge -->
                        {% if user.is_online %}
                        <div class="status-badge online">
                            <div class="status-dot"></div>
                        </div>
                        {% endif %}
                        
                        <!-- Verification Badge -->
                        {% if user.is_verified %}
                        <div class="verification-badge">
                            <i data-feather="check-circle"></i>
                        </div>
                        {% endif %}
                    </div>

                    <!-- Profile Info -->
                    <div class="profile-info">
                        <div class="profile-header">
                            <h3 class="profile-name">{{ user.full_name or user.username }}</h3>
                            <div class="profile-rating">
                                <span class="stars">★★★★★</span>
                                <span class="rating-text">4.9</span>
                            </div>
                        </div>
                        
                        <p class="profile-tagline">{{ (user.bio or 'Amazing creator')[:50] }}{% if user.bio and user.bio|length > 50 %}...{% endif %}</p>
                        
                        <!-- Tags -->
                        {% set tags = user.get_specialty_tags() %}
                        {% if tags %}
                        <div class="profile-tags">
                            {% for tag in tags[:3] %}
                            <span class="tag-liquid">{{ tag }}</span>
                            {% endfor %}
                            {% if tags|length > 3 %}
                            <span class="tag-liquid more">+{{ tags|length - 3 }}</span>
                            {% endif %}
                        </div>
                        {% endif %}
                        
                        <!-- Price & Action -->
                        <div class="profile-footer">
                            <div class="price-info">
                                <span class="price-amount">${{ '%.0f'|format(user.hourly_rate or 50) }}</span>
                                <span class="price-unit">/session</span>
                            </div>
                            <a href="{{ url_for('profile', username=user.username, next=request.full_path) }}" 
                               class="view-profile-btn-liquid">
                                View Profile
                            </a>
                        </div>
                    </div>
                </div>
                {% else %}
                <div class="empty-state">
                    <div class="empty-icon">🔍</div>
                    <h3>No creators found</h3>
                    <p>Try adjusting your search or explore different categories</p>
                    <button class="btn-liquid" onclick="resetFilters()">Show All</button>
                </div>
                {% endfor %}
            </div>

            <!-- Load More Button -->
            <div class="load-more-container">
                <button class="load-more-btn" id="loadMoreBtn">
                    <span class="btn-text">Load More</span>
                    <div class="loading-spinner" style="display: none;">
                        <div class="spinner"></div>
                    </div>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Floating Action Button -->
<div class="fab-container">
    <button class="fab-main" id="fabMain">
        <i data-feather="plus"></i>
    </button>
    <div class="fab-options">
        <button class="fab-option" data-action="filter">
            <i data-feather="filter"></i>
        </button>
        <button class="fab-option" data-action="favorites">
            <i data-feather="heart"></i>
        </button>
        <button class="fab-option" data-action="share">
            <i data-feather="share-2"></i>
        </button>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/search.js', v='1.4') }}"></script>
<script src="{{ url_for('static', filename='js/discover.js', v='1.0') }}"></script>
{% endblock %}
