Database Schema Tree - Droply App (Merged develop + optimize)

ðŸ“Š DATABASE STRUCTURE
â”œâ”€â”€ User (Main user table)
â”‚   â”œâ”€â”€ Basic Info
â”‚   â”‚   â”œâ”€â”€ id (Primary Key)
â”‚   â”‚   â”œâ”€â”€ username (Unique)
â”‚   â”‚   â”œâ”€â”€ email (Unique)
â”‚   â”‚   â”œâ”€â”€ password_hash
â”‚   â”‚   â”œâ”€â”€ full_name
â”‚   â”‚   â”œâ”€â”€ phone
â”‚   â”‚   â”œâ”€â”€ bio
â”‚   â”‚   â”œâ”€â”€ industry
â”‚   â”‚   â”œâ”€â”€ profession
â”‚   â”‚   â””â”€â”€ location
â”‚   â”œâ”€â”€ Skills & Expertise
â”‚   â”‚   â”œâ”€â”€ skills (Legacy field)
â”‚   â”‚   â”œâ”€â”€ skills_1 (Primary skill)
â”‚   â”‚   â”œâ”€â”€ skills_2 (Secondary skill)
â”‚   â”‚   â”œâ”€â”€ skills_3 (Tertiary skill)
â”‚   â”‚   â””â”€â”€ specialty_tags (JSON)
â”‚   â”œâ”€â”€ Appearance & Branding
â”‚   â”‚   â”œâ”€â”€ profile_picture
â”‚   â”‚   â”œâ”€â”€ background_color
â”‚   â”‚   â”œâ”€â”€ primary_color
â”‚   â”‚   â”œâ”€â”€ secondary_color
â”‚   â”‚   â”œâ”€â”€ font_family
â”‚   â”‚   â”œâ”€â”€ font_size
â”‚   â”‚   â””â”€â”€ profile_layout
â”‚   â”œâ”€â”€ Business & Pricing
â”‚   â”‚   â”œâ”€â”€ hourly_rate
â”‚   â”‚   â”œâ”€â”€ currency
â”‚   â”‚   â”œâ”€â”€ rating
â”‚   â”‚   â”œâ”€â”€ rating_count
â”‚   â”‚   â”œâ”€â”€ is_available
â”‚   â”‚   â””â”€â”€ is_featured_user
â”‚   â”œâ”€â”€ Stripe Payment Integration
â”‚   â”‚   â”œâ”€â”€ stripe_account_id
â”‚   â”‚   â”œâ”€â”€ stripe_account_status
â”‚   â”‚   â”œâ”€â”€ payout_enabled
â”‚   â”‚   â”œâ”€â”€ payout_schedule
â”‚   â”‚   â”œâ”€â”€ total_earnings
â”‚   â”‚   â”œâ”€â”€ total_payouts
â”‚   â”‚   â””â”€â”€ pending_balance
â”‚   â”œâ”€â”€ Social Media
â”‚   â”‚   â”œâ”€â”€ linkedin_url
â”‚   â”‚   â”œâ”€â”€ twitter_url
â”‚   â”‚   â”œâ”€â”€ github_url
â”‚   â”‚   â”œâ”€â”€ instagram_url
â”‚   â”‚   â”œâ”€â”€ facebook_url
â”‚   â”‚   â”œâ”€â”€ youtube_url
â”‚   â”‚   â”œâ”€â”€ snapchat_url
â”‚   â”‚   â””â”€â”€ website_url
â”‚   â”œâ”€â”€ Content & Services
â”‚   â”‚   â”œâ”€â”€ service_description
â”‚   â”‚   â”œâ”€â”€ session_duration
â”‚   â”‚   â”œâ”€â”€ content_description
â”‚   â”‚   â””â”€â”€ content_categories
â”‚   â”œâ”€â”€ Google Calendar Integration
â”‚   â”‚   â”œâ”€â”€ google_calendar_connected
â”‚   â”‚   â”œâ”€â”€ google_calendar_token
â”‚   â”‚   â”œâ”€â”€ google_calendar_refresh_token
â”‚   â”‚   â””â”€â”€ google_calendar_id
â”‚   â”œâ”€â”€ Referral System
â”‚   â”‚   â”œâ”€â”€ referral_code
â”‚   â”‚   â”œâ”€â”€ referred_by
â”‚   â”‚   â”œâ”€â”€ total_referral_earnings
â”‚   â”‚   â””â”€â”€ referral_count
â”‚   â””â”€â”€ Preferences
â”‚       â”œâ”€â”€ language
â”‚       â”œâ”€â”€ timezone
â”‚       â””â”€â”€ email_notifications

â”œâ”€â”€ Booking (Service bookings)
â”‚   â”œâ”€â”€ Basic Info
â”‚   â”‚   â”œâ”€â”€ id (Primary Key)
â”‚   â”‚   â”œâ”€â”€ user_id (Booker)
â”‚   â”‚   â”œâ”€â”€ provider_id (Service provider)
â”‚   â”‚   â”œâ”€â”€ start_time
â”‚   â”‚   â”œâ”€â”€ end_time
â”‚   â”‚   â”œâ”€â”€ duration
â”‚   â”‚   â”œâ”€â”€ status
â”‚   â”‚   â””â”€â”€ created_at
â”‚   â”œâ”€â”€ Payment Info
â”‚   â”‚   â”œâ”€â”€ payment_status
â”‚   â”‚   â”œâ”€â”€ payment_amount
â”‚   â”‚   â”œâ”€â”€ stripe_payment_intent_id
â”‚   â”‚   â”œâ”€â”€ stripe_session_id
â”‚   â”‚   â”œâ”€â”€ client_name
â”‚   â”‚   â”œâ”€â”€ client_email
â”‚   â”‚   â””â”€â”€ client_message
â”‚   â””â”€â”€ Video Call Info
â”‚       â”œâ”€â”€ meeting_room_id
â”‚       â”œâ”€â”€ meeting_url
â”‚       â”œâ”€â”€ meeting_started_at
â”‚       â”œâ”€â”€ meeting_ended_at
â”‚       â”œâ”€â”€ meeting_duration
â”‚       â””â”€â”€ recording_url

â”œâ”€â”€ Favorite (User favorites)
â”‚   â”œâ”€â”€ id (Primary Key)
â”‚   â”œâ”€â”€ user_id (User who favorited)
â”‚   â”œâ”€â”€ favorited_user_id (User being favorited)
â”‚   â””â”€â”€ created_at

â”œâ”€â”€ UserInteraction (Track user behavior)
â”‚   â”œâ”€â”€ id (Primary Key)
â”‚   â”œâ”€â”€ user_id (User who performed action)
â”‚   â”œâ”€â”€ target_user_id (User being viewed/clicked)
â”‚   â”œâ”€â”€ interaction_type (view, click, favorite, etc.)
â”‚   â””â”€â”€ created_at

â”œâ”€â”€ AvailabilityRule (User availability)
â”‚   â”œâ”€â”€ id (Primary Key)
â”‚   â”œâ”€â”€ user_id
â”‚   â”œâ”€â”€ weekday
â”‚   â”œâ”€â”€ start
â”‚   â”œâ”€â”€ end
â”‚   â”œâ”€â”€ is_active
â”‚   â”œâ”€â”€ created_at
â”‚   â””â”€â”€ updated_at

â”œâ”€â”€ AvailabilityException (Blocked/available times)
â”‚   â”œâ”€â”€ id (Primary Key)
â”‚   â”œâ”€â”€ user_id
â”‚   â”œâ”€â”€ start
â”‚   â”œâ”€â”€ end
â”‚   â”œâ”€â”€ reason
â”‚   â”œâ”€â”€ is_blocked
â”‚   â””â”€â”€ created_at

â”œâ”€â”€ Payout (User earnings)
â”‚   â”œâ”€â”€ id (Primary Key)
â”‚   â”œâ”€â”€ user_id
â”‚   â”œâ”€â”€ amount
â”‚   â”œâ”€â”€ currency
â”‚   â”œâ”€â”€ stripe_transfer_id
â”‚   â”œâ”€â”€ stripe_payout_id
â”‚   â”œâ”€â”€ status
â”‚   â”œâ”€â”€ created_at
â”‚   â””â”€â”€ paid_at

â”œâ”€â”€ Referral (User referrals)
â”‚   â”œâ”€â”€ id (Primary Key)
â”‚   â”œâ”€â”€ referrer_id (User who made referral)
â”‚   â”œâ”€â”€ referred_user_id (User who was referred)
â”‚   â”œâ”€â”€ referral_code
â”‚   â”œâ”€â”€ created_at
â”‚   â””â”€â”€ status

â”œâ”€â”€ ReferralReward (Referral earnings)
â”‚   â”œâ”€â”€ id (Primary Key)
â”‚   â”œâ”€â”€ referrer_id
â”‚   â”œâ”€â”€ referred_user_id
â”‚   â”œâ”€â”€ booking_id
â”‚   â”œâ”€â”€ reward_amount
â”‚   â”œâ”€â”€ reward_type
â”‚   â”œâ”€â”€ status
â”‚   â”œâ”€â”€ created_at
â”‚   â””â”€â”€ paid_at

â”œâ”€â”€ Content (User-created content)
â”‚   â”œâ”€â”€ id (Primary Key)
â”‚   â”œâ”€â”€ user_id (Content creator)
â”‚   â”œâ”€â”€ title
â”‚   â”œâ”€â”€ description
â”‚   â”œâ”€â”€ content_type
â”‚   â”œâ”€â”€ price
â”‚   â”œâ”€â”€ file_path
â”‚   â”œâ”€â”€ file_size
â”‚   â”œâ”€â”€ thumbnail_path
â”‚   â”œâ”€â”€ preview_available
â”‚   â”œâ”€â”€ preview_path
â”‚   â”œâ”€â”€ status
â”‚   â”œâ”€â”€ views
â”‚   â”œâ”€â”€ purchases
â”‚   â”œâ”€â”€ earnings
â”‚   â”œâ”€â”€ created_at
â”‚   â””â”€â”€ updated_at

â”œâ”€â”€ ContentPurchase (Content sales)
â”‚   â”œâ”€â”€ id (Primary Key)
â”‚   â”œâ”€â”€ buyer_id
â”‚   â”œâ”€â”€ content_id
â”‚   â”œâ”€â”€ amount_paid
â”‚   â”œâ”€â”€ payment_status
â”‚   â”œâ”€â”€ stripe_payment_intent_id
â”‚   â””â”€â”€ created_at

â”œâ”€â”€ DropinSession (Live Q&A sessions)
â”‚   â”œâ”€â”€ id (Primary Key)
â”‚   â”œâ”€â”€ host_id
â”‚   â”œâ”€â”€ topic
â”‚   â”œâ”€â”€ description
â”‚   â”œâ”€â”€ max_participants
â”‚   â”œâ”€â”€ current_participants
â”‚   â”œâ”€â”€ is_active
â”‚   â”œâ”€â”€ is_anonymous
â”‚   â”œâ”€â”€ session_code
â”‚   â”œâ”€â”€ created_at
â”‚   â”œâ”€â”€ started_at
â”‚   â”œâ”€â”€ ended_at
â”‚   â””â”€â”€ duration_minutes

â”œâ”€â”€ DropinParticipant (Session participants)
â”‚   â”œâ”€â”€ id (Primary Key)
â”‚   â”œâ”€â”€ session_id
â”‚   â”œâ”€â”€ user_id (Nullable for anonymous)
â”‚   â”œâ”€â”€ anonymous_name
â”‚   â”œâ”€â”€ joined_at
â”‚   â”œâ”€â”€ left_at
â”‚   â””â”€â”€ is_active

â”œâ”€â”€ DropinMessage (Session messages)
â”‚   â”œâ”€â”€ id (Primary Key)
â”‚   â”œâ”€â”€ session_id
â”‚   â”œâ”€â”€ participant_id
â”‚   â”œâ”€â”€ message_type
â”‚   â”œâ”€â”€ content
â”‚   â”œâ”€â”€ is_anonymous
â”‚   â””â”€â”€ created_at

â”œâ”€â”€ AIMatch (AI-powered matching)
â”‚   â”œâ”€â”€ id (Primary Key)
â”‚   â”œâ”€â”€ user_id
â”‚   â”œâ”€â”€ matched_user_id
â”‚   â”œâ”€â”€ query
â”‚   â”œâ”€â”€ match_score
â”‚   â”œâ”€â”€ match_reasons
â”‚   â”œâ”€â”€ created_at
â”‚   â”œâ”€â”€ is_viewed
â”‚   â””â”€â”€ is_acted_upon

â””â”€â”€ Category (Content categories)
    â”œâ”€â”€ id (Primary Key)
    â”œâ”€â”€ name
    â”œâ”€â”€ category_type
    â””â”€â”€ is_active

ðŸ”— KEY RELATIONSHIPS:
- User â†’ Booking (as user_id and provider_id)
- User â†’ Favorite (as user_id and favorited_user_id)
- User â†’ UserInteraction (as user_id and target_user_id)
- User â†’ AvailabilityRule (one-to-many)
- User â†’ AvailabilityException (one-to-many)
- User â†’ Payout (one-to-many)
- User â†’ Referral (as referrer_id and referred_user_id)
- User â†’ Content (one-to-many)
- Booking â†’ ReferralReward (one-to-many)
- DropinSession â†’ DropinParticipant (one-to-many)
- DropinSession â†’ DropinMessage (one-to-many)

ðŸŽ¯ KEY FEATURES SUPPORTED:
âœ… User profiles with customizable branding
âœ… Stripe payment integration
âœ… Video calling with Daily.co + WebRTC fallback
âœ… Google Calendar integration
âœ… AI-powered user matching
âœ… Drop-in Q&A sessions
âœ… Content creation and sales
âœ… Referral system with rewards
âœ… Availability management
âœ… User interaction tracking
âœ… Earnings and payout management
